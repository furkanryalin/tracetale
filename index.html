<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TraceTale</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="styles-activity.css">
    <link rel="stylesheet" href="styles-settings.css">
    <link rel="stylesheet" href="styles-profile-page.css">
    <link rel="stylesheet" href="styles-messaging-page.css">
    <link rel="stylesheet" href="styles-notifications.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
    <div id="intro-screen" class="intro-screen">
        <div class="intro-content">
            <div class="logo-intro">
                <img src="tracetalelogo.png" alt="TraceMark Logo" class="intro-logo">
                    <h1 class="trace-tale-title">TraceMark</h1>
            </div>
            <div class="intro-subtitle">
                <p>Harita Ã¼zerinde hikayelerinizi paylaÅŸÄ±n</p>
            </div>
        </div>
    </div>

    <div id="main-site" class="main-site hidden">
        <header class="site-header">
            <div class="header-content">
                <div class="logo-container">
                    <img src="tracetalelogo.png" alt="TraceMark Logo" class="logo-img">
                    <h1 class="logo">TraceMark</h1>
                </div>
                <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="MenÃ¼">
                    <i class="fas fa-bars"></i>
                </button>
                <nav class="main-nav">
                    <button class="nav-btn" id="add-story-btn">Hikaye Ekle</button>
                    <button class="nav-btn" id="filter-btn">Filtrele</button>
                    <button class="nav-btn" id="notifications-header-btn" style="display: none;" title="Bildirimler">
                        <i class="fas fa-bell"></i>
                    </button>
                    <button class="nav-btn" id="dm-header-btn" style="display: none;" title="Mesajlar">
                        <i class="fas fa-comment"></i>
                    </button>
                    <button class="nav-btn" id="auth-btn">GiriÅŸ Yap</button>
                </nav>
            </div>
            <nav class="mobile-menu" id="mobile-menu">
                <button class="nav-btn" id="mobile-add-story-btn">Hikaye Ekle</button>
                <button class="nav-btn" id="mobile-filter-btn">Filtrele</button>
                <button class="nav-btn" id="mobile-notifications-btn" style="display: none;" title="Bildirimler">
                    <i class="fas fa-bell"></i>
                    <span>Bildirimler</span>
                </button>
                <button class="nav-btn" id="mobile-dm-btn" style="display: none;" title="Mesajlar">
                    <i class="fas fa-comment"></i>
                    <span>Mesajlar</span>
                </button>
                <button class="nav-btn" id="mobile-auth-btn">GiriÅŸ Yap</button>
            </nav>
            </div>
        </header>

        <div id="map-container" class="map-container">
            <div id="map"></div>
            
            <div class="search-container">
                <div class="search-box">
                    <input type="text" id="search-input" placeholder="TraceMark ile konum ara..." autocomplete="off">
                    <button id="search-btn" class="search-btn">
                        <i class="fas fa-search search-icon"></i>
                    </button>
                    <button id="clear-search" class="clear-btn" style="display: none;">
                        <i class="fas fa-times clear-icon"></i>
                    </button>
                    <div id="search-status" class="search-status" style="display: none;">
                        <i class="fas fa-globe status-icon"></i>
                    </div>
                </div>
                <div id="search-results" class="search-results hidden"></div>
            </div>
            
            <div class="map-style-panel">
                <div class="style-options">
                    <button class="style-option active" data-style="dark" title="KaranlÄ±k">
                        <div class="style-preview dark-preview"></div>
                        <span>KaranlÄ±k</span>
                    </button>
                    <button class="style-option" data-style="light" title="AydÄ±nlÄ±k">
                        <div class="style-preview light-preview"></div>
                        <span>AydÄ±nlÄ±k</span>
                    </button>
                    <button class="style-option" data-style="satellite" title="Uydu">
                        <div class="style-preview satellite-preview"></div>
                        <span>Uydu</span>
                    </button>
                    <button class="style-option" data-style="terrain" title="Arazi">
                        <div class="style-preview terrain-preview"></div>
                        <span>Arazi</span>
                    </button>
                </div>
                
                <div class="map-features">
                    <button class="feature-toggle" id="traffic-toggle" title="Trafik">
                        <i class="fas fa-car icon"></i>
                    </button>
                    <button class="feature-toggle" id="transit-toggle" title="Toplu TaÅŸÄ±ma">
                        <i class="fas fa-bus icon"></i>
                    </button>
                    <button class="feature-toggle" id="bike-toggle" title="Bisiklet">
                        <i class="fas fa-bicycle icon"></i>
                    </button>
                    <button class="feature-toggle" id="labels-toggle" title="Etiketler" class="active">
                        <i class="fas fa-tag icon"></i>
                    </button>
                </div>
            </div>
            
            <div class="location-controls">
                <button class="location-btn" id="my-location-btn" title="Konumuma Git">
                    <i class="fas fa-map-marker-alt icon"></i>
                </button>
            </div>
            </div>
        </div>

        <button class="fab" id="add-story-fab">
            <span>+</span>
        </button>

        <div id="story-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Yeni Hikaye Ekle</h3>
                    <button class="close-btn" id="close-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="story-form">
                        <div class="form-group">
                            <label for="story-title">BaÅŸlÄ±k</label>
                            <input type="text" id="story-title" placeholder="Hikayenizin baÅŸlÄ±ÄŸÄ±nÄ± yazÄ±n...">
                        </div>
                        <div class="form-group">
                            <label for="story-content">Hikaye</label>
                            <textarea id="story-content" placeholder="Hikayenizi yazÄ±n (max 200 kelime)..." maxlength="1000"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="story-type">TÃ¼r</label>
                            <select id="story-type">
                                <option value="story">Hikaye</option>
                                <option value="note">Not</option>
                                <option value="photo">FotoÄŸraf</option>
                            </select>
                        </div>
                        <div class="form-group photo-upload-group" id="photo-upload-group" style="display: none;">
                            <label for="photo-upload">FotoÄŸraf SeÃ§</label>
                            <input type="file" id="photo-upload" accept="image/*" style="display: none;">
                            <div class="photo-upload-area" id="photo-upload-area">
                                <div class="photo-upload-content">
                                    <i class="fas fa-camera photo-upload-icon"></i>
                                    <span class="photo-upload-text">FotoÄŸraf seÃ§mek iÃ§in tÄ±klayÄ±n</span>
                                </div>
                            </div>
                            <div class="photo-preview" id="photo-preview" style="display: none;">
                                <img id="photo-preview-img" src="" alt="Ã–nizleme">
                                <button type="button" class="photo-remove-btn" id="photo-remove-btn">Ã—</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="anonymous"> Anonim olarak paylaÅŸ
                            </label>
                        </div>
                        <div class="location-confirm">
                            <p><strong>Konum:</strong> <span id="selected-location" onclick="startLocationSelection()" style="color: #2196F3; cursor: pointer; text-decoration: underline;">Konum seÃ§ilmedi</span></p>
                            <p class="location-hint">Bu konuma hikaye eklemek istediÄŸinizden emin misiniz?</p>
                        </div>
                        <button type="submit" class="submit-btn">PaylaÅŸ</button>
                    </form>
                </div>
            </div>
        </div>

        <div id="context-menu" class="context-menu hidden">
            <div class="context-menu-content">
                <button class="context-menu-item" id="add-story-context">
                    <i class="fas fa-book icon"></i>
                    <span>Hikaye Ekle</span>
                </button>
                <button class="context-menu-item" id="add-note-context">
                    <i class="fas fa-sticky-note icon"></i>
                    <span>Not Ekle</span>
                </button>
                <button class="context-menu-item" id="add-photo-context">
                    <i class="fas fa-camera icon"></i>
                    <span>FotoÄŸraf Ekle</span>
                </button>
            </div>
        </div>

        <div id="story-actions-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Hikaye Ä°ÅŸlemleri</h3>
                    <button class="close-btn" id="close-actions-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="story-preview">
                        <h4 id="story-preview-title">Hikaye BaÅŸlÄ±ÄŸÄ±</h4>
                        <p id="story-preview-content">Hikaye iÃ§eriÄŸi...</p>
                        <div class="story-meta">
                            <span id="story-preview-author">Anonim</span>
                            <span id="story-preview-date">Tarih</span>
                        </div>
                    </div>
                    <div class="story-actions">
                        <button class="action-btn edit-btn" id="edit-story">
                            <i class="fas fa-pencil-alt icon"></i>
                            DÃ¼zenle
                        </button>
                        <button class="action-btn delete-btn" id="delete-story">
                            <i class="fas fa-trash icon"></i>
                            Sil
                        </button>
                        <button class="action-btn share-btn" id="share-story">
                            <i class="fas fa-link icon"></i>
                            PaylaÅŸ
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div id="photo-modal" class="photo-modal hidden">
        <div class="photo-modal-content">
            <span class="photo-close" id="photo-close">&times;</span>
            <img id="photo-full-size" src="" alt="FotoÄŸraf" style="display: none;">
            <div class="photo-info" style="display: none;">
                <h3 id="photo-title"></h3>
                <p id="photo-description"></p>
                <div class="photo-meta">
                    <span id="photo-author"></span>
                    <span id="photo-date"></span>
                </div>
            </div>
        </div>
    </div>

    <div id="filter-modal" class="filter-modal hidden">
        <div class="filter-modal-content">
            <div class="filter-header">
                <h2>Filtreleme SeÃ§enekleri</h2>
                <span class="filter-close" id="filter-close">&times;</span>
            </div>
            <div class="filter-body">
                <div class="filter-section">
                    <h3>Hikaye TÃ¼rÃ¼</h3>
                    <div class="filter-options">
                        <label class="filter-option">
                            <input type="checkbox" id="filter-story" checked>
                            <span class="checkmark"></span>
                            <i class="fas fa-book"></i> Hikayeler
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" id="filter-note" checked>
                            <span class="checkmark"></span>
                            <i class="fas fa-sticky-note"></i> Notlar
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" id="filter-photo" checked>
                            <span class="checkmark"></span>
                            <i class="fas fa-camera"></i> FotoÄŸraflar
                        </label>
                    </div>
                </div>
                <div class="filter-section">
                    <h3>Tarih AralÄ±ÄŸÄ±</h3>
                    <div class="date-range">
                        <input type="date" id="filter-date-from" class="date-input">
                        <span>ile</span>
                        <input type="date" id="filter-date-to" class="date-input">
                    </div>
                </div>
                <div class="filter-section">
                    <h3>Yazar</h3>
                    <input type="text" id="filter-author" placeholder="Yazar adÄ±..." class="text-input">
                </div>
                <div class="filter-section">
                    <h3>Anahtar Kelime</h3>
                    <input type="text" id="filter-keyword" placeholder="Arama kelimesi..." class="text-input">
                </div>
                <div class="filter-section">
                    <h3>YarÄ±Ã§ap Filtresi</h3>
                    <div class="radius-controls">
                        <div class="radius-slider-container">
                            <input type="range" id="radius-slider" min="100" max="10000" value="1000" step="100" class="radius-slider">
                            <div class="radius-display">
                                <span id="radius-value">1000</span> metre
                            </div>
                        </div>
                        <div class="radius-buttons">
                            <button class="radius-btn" data-radius="500">500m</button>
                            <button class="radius-btn" data-radius="1000">1km</button>
                            <button class="radius-btn" data-radius="2000">2km</button>
                            <button class="radius-btn" data-radius="5000">5km</button>
                        </div>
                        <div class="radius-center">
                            <button class="radius-center-btn" id="center-radius-btn">
                                <i class="fas fa-map-marker-alt"></i> Merkezi Ayarla
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="filter-footer">
                <button class="filter-btn secondary" id="filter-clear">Temizle</button>
                <button class="filter-btn primary" id="filter-apply">Uygula</button>
            </div>
            <div class="radius-status" id="radius-status" style="display: none;">
                <div class="status-indicator">
                    <i class="fas fa-map-marker-alt status-icon"></i>
                    <span class="status-text">YarÄ±Ã§ap filtresi aktif</span>
                    <button class="status-close" id="radius-status-close">Ã—</button>
                </div>
            </div>
        </div>
    </div>

    <div id="auth-modal" class="auth-modal hidden">
        <div class="auth-modal-content">
            <div class="auth-header">
                <h2 id="auth-title">GiriÅŸ Yap</h2>
                <span class="auth-close" id="auth-close">&times;</span>
            </div>
            <div class="auth-body">
                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <label for="login-email">E-posta</label>
                        <input type="email" id="login-email" placeholder="ornek@email.com" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Åžifre</label>
                        <input type="password" id="login-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
                    </div>
                    <button type="submit" class="auth-btn primary">GiriÅŸ Yap</button>
                    <div class="auth-switch">
                        <span>HesabÄ±n yok mu? </span>
                        <a href="#" id="switch-to-register">KayÄ±t Ol</a>
                    </div>
                </form>
                
                <form id="register-form" class="auth-form hidden">
                    <div class="form-group">
                        <label for="register-name">Ad Soyad</label>
                        <input type="text" id="register-name" placeholder="AdÄ±nÄ±z SoyadÄ±nÄ±z" required>
                    </div>
                    <div class="form-group">
                        <label for="register-email">E-posta</label>
                        <input type="email" id="register-email" placeholder="ornek@email.com" required>
                    </div>
                    <div class="form-group">
                        <label for="register-password">Åžifre</label>
                        <input type="password" id="register-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
                    </div>
                    <div class="form-group">
                        <label for="register-confirm">Åžifre Tekrar</label>
                        <input type="password" id="register-confirm" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
                    </div>
                    <button type="submit" class="auth-btn primary">KayÄ±t Ol</button>
                    <div class="auth-switch">
                        <span>Zaten hesabÄ±n var mÄ±? </span>
                        <a href="#" id="switch-to-login">GiriÅŸ Yap</a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="profile-modal" class="profile-modal hidden">
        <div class="profile-modal-content">
            <div class="profile-header">
                <h2><i class="fas fa-user"></i> Profil</h2>
                <span class="profile-close" id="profile-close">&times;</span>
            </div>
            <div class="profile-body">
                <div class="profile-info">
                    <div class="profile-avatar">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iNDAiIGZpbGw9IiMzMzMiLz4KPHN2ZyB4PSIyMCIgeT0iMjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjZmZmIj4KPHBhdGggZD0iTTEyIDEyQzE0LjIxIDEyIDE2IDEwLjIxIDE2IDhDMTYgNS43OSAxNC4yMSA0IDEyIDRDOS43OSA0IDggNS43OSA4IDhDOCAxMC4yMSA5Ljc5IDEyIDEyIDEyWk0xMiAxNEM5LjMzIDE0IDcgMTYuMzMgNyAxOUgxN0MxNyAxNi4zMyAxNC42NyAxNCAxMiAxNFoiLz4KPC9zdmc+Cjwvc3ZnPgo=" alt="Avatar" id="profile-avatar">
                        <div class="avatar-edit">
                            <i class="fas fa-camera edit-icon"></i>
                        </div>
                    </div>
                    <div class="profile-details">
                        <h3 id="profile-name">KullanÄ±cÄ±</h3>
                        <p id="profile-email">kullanici@example.com</p>
                        <div class="profile-badge">
                            <span class="badge"><i class="fas fa-star"></i> Aktif KullanÄ±cÄ±</span>
                        </div>
                        <div class="profile-stats">
                            <div class="stat">
                                <span class="stat-number" id="profile-stories">0</span>
                                <span class="stat-label"><i class="fas fa-book"></i> Hikaye</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number" id="profile-notes">0</span>
                                <span class="stat-label"><i class="fas fa-sticky-note"></i> Not</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number" id="profile-photos">0</span>
                                <span class="stat-label"><i class="fas fa-camera"></i> FotoÄŸraf</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="profile-actions">
                    <button class="profile-btn primary" id="edit-profile">
                        <i class="fas fa-pencil-alt btn-icon"></i>
                        Profili DÃ¼zenle
                    </button>
                    <button class="profile-btn secondary" id="my-stories">
                        <i class="fas fa-book-open btn-icon"></i>
                        Hikayelerim
                    </button>
                    <button class="profile-btn secondary" id="settings">
                        <i class="fas fa-cog btn-icon"></i>
                        Ayarlar
                    </button>
                    <button class="profile-btn danger" id="logout">
                        <i class="fas fa-sign-out-alt btn-icon"></i>
                        Ã‡Ä±kÄ±ÅŸ Yap
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="dm-modal" class="dm-modal hidden">
        <div class="dm-modal-content">
            <div class="dm-header">
                <div class="dm-header-left">
                    <button class="dm-back-btn" id="dm-back">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div class="dm-user-info">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiMzMzMiLz4KPHN2ZyB4PSIxMCIgeT0iMTAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjZmZmIj4KPHBhdGggZD0iTTEyIDEyQzE0LjIxIDEyIDE2IDEwLjIxIDE2IDhDMTYgNS43OSAxNC4yMSA0IDEyIDRDOS43OSA0IDggNS43OSA4IDhDOCAxMC4yMSA5Ljc5IDEyIDEyIDEyWk0xMiAxNEM5LjMzIDE0IDcgMTYuMzMgNyAxOUgxN0MxNyAxNi4zMyAxNC42NyAxNCAxMiAxNFoiLz4KPC9zdmc+Cjwvc3ZnPgo=" alt="Avatar" class="dm-avatar">
                        <div class="dm-user-details">
                            <h4 class="dm-username">KullanÄ±cÄ± AdÄ±</h4>
                            <span class="dm-status">Aktif</span>
                        </div>
                    </div>
                </div>
                <div class="dm-header-right">
                    <button class="dm-action-btn" id="dm-video-call">
                        <i class="fas fa-video"></i>
                    </button>
                    <button class="dm-action-btn" id="dm-phone-call">
                        <i class="fas fa-phone"></i>
                    </button>
                    <button class="dm-action-btn" id="dm-info">
                        <i class="fas fa-info-circle"></i>
                    </button>
                </div>
            </div>
            
            <div class="dm-body">
                <div class="dm-conversation" id="dm-conversation">
                    <div class="dm-message received">
                        <div class="dm-message-avatar">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiMzMzMiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2ZmZiI+CjxwYXRoIGQ9Ik0xMiAxMkMxNC4yMSAxMiAxNiAxMC4yMSAxNiA4QzE2IDUuNzkgMTQuMjEgNCAxMiA0QzkuNzkgNCA4IDUuNzkgOCA4QzggMTAuMjEgOS43OSAxMiAxMiAxMlpNMTIgMTRNOS4zMyAxNCA3IDE2LjMzIDcgMTlIMTdDMTcgMTYuMzMgMTQuNjcgMTQgMTIgMTRaIi8+Cjwvc3ZnPgo=" alt="Avatar">
                        </div>
                        <div class="dm-message-content">
                            <div class="dm-message-bubble">
                                <p>Merhaba! NasÄ±lsÄ±n?</p>
                                <span class="dm-message-time">14:30</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dm-message sent">
                        <div class="dm-message-content">
                            <div class="dm-message-bubble">
                                <p>Ä°yiyim, teÅŸekkÃ¼rler! Sen nasÄ±lsÄ±n?</p>
                                <span class="dm-message-time">14:32</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dm-message received">
                        <div class="dm-message-avatar">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiMzMzMiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2ZmZiI+CjxwYXRoIGQ9Ik0xMiAxMkMxNC4yMSAxMiAxNiAxMC4yMSAxNiA4QzE2IDUuNzkgMTQuMjEgNCAxMiA0QzkuNzkgNCA4IDUuNzkgOCA4QzggMTAuMjEgOS43OSAxMiAxMiAxMlpNMTIgMTRNOS4zMyAxNCA3IDE2LjMzIDcgMTlIMTdDMTcgMTYuMzMgMTQuNjcgMTQgMTIgMTRaIi8+Cjwvc3ZnPgo=" alt="Avatar">
                        </div>
                        <div class="dm-message-content">
                            <div class="dm-message-bubble">
                                <p>Ben de iyiyim! Bu yeni proje nasÄ±l gidiyor?</p>
                                <span class="dm-message-time">14:35</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dm-message sent">
                        <div class="dm-message-content">
                            <div class="dm-message-bubble">
                                <p>Ã‡ok gÃ¼zel gidiyor! Instagram DM kutusu taslaÄŸÄ± Ã¼zerinde Ã§alÄ±ÅŸÄ±yorum ðŸš€</p>
                                <span class="dm-message-time">14:37</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dm-message received">
                        <div class="dm-message-avatar">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiMzMzMiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2ZmZiI+CjxwYXRoIGQ9Ik0xMiAxMkMxNC4yMSAxMiAxNiAxMC4yMSAxNiA4QzE2IDUuNzkgMTQuMjEgNCAxMiA0QzkuNzkgNCA4IDUuNzkgOCA4QzggMTAuMjEgOS43OSAxMiAxMiAxMlpNMTIgMTRNOS4zMyAxNCA3IDE2LjMzIDcgMTlIMTdDMTcgMTYuMzMgMTQuNjcgMTQgMTIgMTRaIi8+Cjwvc3ZnPgo=" alt="Avatar">
                        </div>
                        <div class="dm-message-content">
                            <div class="dm-message-bubble">
                                <p>Harika! NasÄ±l gÃ¶rÃ¼nÃ¼yor? ðŸ˜Š</p>
                                <span class="dm-message-time">14:38</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="dm-input-area">
                    <div class="dm-input-container">
                        <button class="dm-attachment-btn" id="dm-attachment">
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <input type="text" class="dm-input" id="dm-input" placeholder="Mesaj yazÄ±n...">
                        <button class="dm-emoji-btn" id="dm-emoji">
                            <i class="far fa-smile"></i>
                        </button>
                        <button class="dm-send-btn" id="dm-send">
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Instagram-Style Messaging Page -->
    <div id="messaging-page" class="messaging-page">
        <div class="messaging-layout">
            <!-- Left Sidebar - Conversations List -->
            <div class="messaging-sidebar" id="messaging-sidebar">
                <div class="messaging-sidebar-header">
                    <button class="messaging-sidebar-back" id="messaging-back"><i class="fas fa-arrow-left"></i></button>
                    <h2 class="messaging-sidebar-title">Mesajlar</h2>
                    <button class="messaging-sidebar-new" id="messaging-new"><i class="fas fa-pencil-alt"></i></button>
                </div>
                
                <div class="messaging-search">
                    <input type="text" class="messaging-search-input" id="messaging-search" placeholder="Ara...">
                </div>
                
                <div class="messaging-conversations" id="messaging-conversations">
                    <!-- KonuÅŸmalar dinamik olarak yÃ¼klenecek -->
                </div>
            </div>
            
            <!-- Right Panel - Active Conversation -->
            <div class="messaging-content" id="messaging-content">
                <!-- Empty State -->
                <div class="messaging-empty" id="messaging-empty">
                    <i class="fas fa-comment messaging-empty-icon"></i>
                    <h3 class="messaging-empty-title">MesajlarÄ±n</h3>
                    <p class="messaging-empty-text">Bir arkadaÅŸÄ±na veya gruba mesaj gÃ¶ndermek iÃ§in bir konuÅŸma seÃ§.</p>
                </div>
                
                <!-- Active Chat (Hidden by default) -->
                <div id="messaging-active-chat" style="display: none; flex-direction: column; height: 100%;">
                    <!-- Chat Header -->
                    <div class="messaging-chat-header" id="messaging-chat-header">
                        <!-- Dinamik iÃ§erik -->
                    </div>
                    
                    <!-- Messages -->
                    <div class="messaging-messages" id="messaging-messages">
                        <!-- Mesajlar dinamik olarak yÃ¼klenecek -->
                    </div>
                    
                    <!-- Input Area -->
                    <div class="messaging-input-area">
                        <div class="messaging-input-wrapper">
                            <textarea 
                                class="messaging-input" 
                                id="messaging-input" 
                                placeholder="Mesaj yaz..."
                                rows="1"
                            ></textarea>
                            <button class="messaging-send-btn" id="messaging-send-btn">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="dm-list-modal" class="dm-list-modal hidden">
        <div class="dm-list-content">
            <div class="dm-list-header">
                <h2><i class="fas fa-comment"></i> Mesajlar</h2>
                <button class="dm-list-close" id="dm-list-close">&times;</button>
            </div>
            
            <div class="dm-list-body">
                <div class="dm-search">
                    <input type="text" class="dm-search-input" placeholder="Mesajlarda ara..." id="dm-search">
                </div>
                
                <div class="dm-conversations">
                    <!-- KonuÅŸmalar dinamik olarak JavaScript tarafÄ±ndan yÃ¼klenecek -->
                    <div class="dm-empty-state" id="dm-empty-state">
                        <div style="text-align: center; padding: 80px 20px; color: #888;">
                            <i class="fas fa-comment" style="font-size: 3rem; margin-bottom: 15px; color: #888;"></i>
                            <div style="font-size: 1.2rem; margin-bottom: 10px; font-weight: 600;">HenÃ¼z mesaj yok</div>
                            <div style="font-size: 0.95rem; line-height: 1.5;">
                                Bir hikaye sahibine mesaj gÃ¶ndererek<br>
                                veya yeni konuÅŸma baÅŸlatarak baÅŸlayÄ±n!
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ayarlar Modal -->
    <div id="settings-modal" class="settings-modal hidden">
        <div class="settings-modal-content">
            <div class="settings-header">
                <h2><i class="fas fa-cog"></i> Ayarlar</h2>
                <button class="settings-close" id="settings-close">&times;</button>
            </div>
            
            <div class="settings-body">
                <!-- GÃ¶rÃ¼nÃ¼m AyarlarÄ± -->
                <div class="settings-section">
                    <h3><i class="fas fa-palette"></i> GÃ¶rÃ¼nÃ¼m</h3>
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">KaranlÄ±k Mod</span>
                            <span class="setting-description">Gece kullanÄ±mÄ± iÃ§in karanlÄ±k tema</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-dark-mode" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">Animasyonlar</span>
                            <span class="setting-description">GeÃ§iÅŸ animasyonlarÄ±nÄ± gÃ¶ster</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-animations" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Bildirim AyarlarÄ± -->
                <div class="settings-section">
                    <h3><i class="fas fa-bell"></i> Bildirimler</h3>
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">Yeni Mesaj Bildirimleri</span>
                            <span class="setting-description">Yeni mesaj geldiÄŸinde bildirim al</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-message-notif" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">Hikaye Bildirimleri</span>
                            <span class="setting-description">YakÄ±nÄ±mda yeni hikaye eklendiÄŸinde bildirim al</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-story-notif">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">Ses Bildirimleri</span>
                            <span class="setting-description">Bildirim sesleri Ã§al</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-sound-notif" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Gizlilik AyarlarÄ± -->
                <div class="settings-section">
                    <h3><i class="fas fa-lock"></i> Gizlilik</h3>
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label"><i class="fas fa-lock"></i> Gizli Mod (Ã–zel Hesap)</span>
                            <span class="setting-description">Sadece takipÃ§ilerim gÃ¶rebilsin</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-privacy-mode">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">Aktiflik Durumunu GÃ¶ster</span>
                            <span class="setting-description">DiÄŸer kullanÄ±cÄ±lar online durumumu gÃ¶rebilsin</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-show-online" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">Son GÃ¶rÃ¼lme ZamanÄ±</span>
                            <span class="setting-description">Son gÃ¶rÃ¼lme zamanÄ±mÄ± gÃ¶ster</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-last-seen" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">Konumumu PaylaÅŸ</span>
                            <span class="setting-description">Hikayelerimde konumumu gÃ¶ster</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-share-location" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Harita AyarlarÄ± -->
                <div class="settings-section">
                    <h3><i class="fas fa-map"></i> Harita</h3>
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">Otomatik Konum</span>
                            <span class="setting-description">Sayfa aÃ§Ä±lÄ±ÅŸÄ±nda konumumu gÃ¶ster</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-auto-location" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label">Harita Etiketleri</span>
                            <span class="setting-description">Yer isimlerini haritada gÃ¶ster</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-map-labels" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Hesap Ä°ÅŸlemleri -->
                <div class="settings-section">
                    <h3><i class="fas fa-user"></i> Hesap</h3>
                    <div class="setting-item">
                        <button class="settings-action-btn secondary" id="change-password-btn">
                            <i class="fas fa-key"></i> Åžifre DeÄŸiÅŸtir
                        </button>
                    </div>
                    <div class="setting-item">
                        <button class="settings-action-btn danger" id="delete-account-btn">
                            <i class="fas fa-trash"></i> HesabÄ± Sil
                        </button>
                    </div>
                </div>

                <!-- HakkÄ±nda -->
                <div class="settings-section">
                    <h3><i class="fas fa-info-circle"></i> HakkÄ±nda</h3>
                    <div class="setting-item info-item">
                        <span class="setting-label">Versiyon</span>
                        <span class="setting-value">1.0.0</span>
                    </div>
                    <div class="setting-item info-item">
                        <span class="setting-label">Son GÃ¼ncelleme</span>
                        <span class="setting-value">25 Ekim 2025</span>
                    </div>
                </div>
                
                <!-- Ã‡Ä±kÄ±ÅŸ Yap -->
                <div class="settings-section logout-section">
                    <button class="logout-btn" id="logout-btn">
                        <i class="fas fa-sign-out-alt logout-icon"></i>
                        <span class="logout-text">Ã‡Ä±kÄ±ÅŸ Yap</span>
                    </button>
                </div>
            </div>

            <div class="settings-footer">
                <button class="settings-btn primary" id="save-settings-btn">Kaydet</button>
                <button class="settings-btn secondary" id="cancel-settings-btn">Ä°ptal</button>
            </div>
        </div>
    </div>

    <!-- TraceTale ModÃ¼ller - SÄ±ralÄ± YÃ¼kleme -->
    <script src="scripts/utils.js"></script>
    <script src="scripts/icons.js"></script>
    <script src="scripts/page-visibility.js"></script>
    <script src="scripts/config.js"></script>
    <script src="scripts/activity-tracker.js"></script>
    <script src="scripts/notifications.js"></script>
    <script src="scripts/core.js"></script>
    <script src="scripts/auth.js"></script>
    <script src="scripts/stories.js"></script>
    <script src="scripts/map-features.js"></script>
    <script src="scripts/photo.js"></script>
    <script src="scripts/interactions.js"></script>
    <script src="scripts/messaging-api.js"></script>
    <script src="scripts/search.js"></script>
    <script src="scripts/filters.js"></script>
    <script src="scripts/profile-page.js"></script>
    <script src="scripts/messaging-page.js"></script>
    <script src="scripts/notifications-page.js"></script>
    <script src="scripts/profile.js"></script>

    <!-- Instagram-Style Profile Page -->
    <div id="profile-page" class="profile-page">
        <div class="profile-page-header">
            <button class="profile-page-back" id="profile-page-back"><i class="fas fa-arrow-left"></i></button>
            <div class="profile-page-username" id="profile-page-username">@username</div>
            <button class="profile-page-settings" id="profile-page-settings-btn"><i class="fas fa-cog"></i></button>
        </div>

        <div class="profile-info-section">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Ccircle cx='60' cy='60' r='60' fill='%232196F3'/%3E%3C/svg%3E" alt="Avatar" class="profile-avatar-large" id="profile-page-avatar">
            
            <div class="profile-info-details">
                <div class="profile-display-name" id="profile-page-name">KullanÄ±cÄ± AdÄ±</div>
                <div class="profile-username-handle" id="profile-page-handle">@username</div>
                <div class="profile-bio" id="profile-page-bio">HenÃ¼z bir bio eklenmedi...</div>
            </div>

            <div class="profile-stats">
                <div class="profile-stat-item">
                    <div class="profile-stat-value" id="profile-page-followers-count">0</div>
                    <div class="profile-stat-label">TakipÃ§i</div>
                </div>
                <div class="profile-stat-item">
                    <div class="profile-stat-value" id="profile-page-following-count">0</div>
                    <div class="profile-stat-label">Takip</div>
                </div>
                <div class="profile-stat-item">
                    <div class="profile-stat-value" id="profile-page-stories-count">0</div>
                    <div class="profile-stat-label">GÃ¶nderi</div>
                </div>
            </div>

            <div class="profile-actions">
                <!-- Butonlar JavaScript tarafÄ±ndan dinamik olarak oluÅŸturulacak -->
            </div>
        </div>

        <div class="profile-tabs">
            <button class="profile-tab active" data-tab="stories">
                <i class="fas fa-book profile-tab-icon"></i>
                Hikayeler
            </button>
            <button class="profile-tab" data-tab="notes">
                <i class="fas fa-sticky-note profile-tab-icon"></i>
                Notlar
            </button>
            <button class="profile-tab" data-tab="photos">
                <i class="fas fa-camera profile-tab-icon"></i>
                FotoÄŸraflar
            </button>
        </div>

        <div class="profile-content">
            <!-- Stories Tab -->
            <div class="profile-tab-panel active" id="tab-stories">
                <div class="profile-loading" id="stories-loading">
                    <div class="profile-spinner"></div>
                </div>
                <div class="stories-grid" id="stories-grid"></div>
                <div class="empty-state" id="stories-empty" style="display: none;">
                    <i class="fas fa-book empty-state-icon"></i>
                    <div class="empty-state-title">HenÃ¼z hikaye yok</div>
                    <div class="empty-state-text">Ä°lk hikayeni ekleyerek baÅŸla!</div>
                </div>
            </div>

            <!-- Notes Tab -->
            <div class="profile-tab-panel" id="tab-notes">
                <div class="profile-loading" id="notes-loading">
                    <div class="profile-spinner"></div>
                </div>
                <div class="notes-list" id="notes-list"></div>
                <div class="empty-state" id="notes-empty" style="display: none;">
                    <i class="fas fa-sticky-note empty-state-icon"></i>
                    <div class="empty-state-title">HenÃ¼z not yok</div>
                    <div class="empty-state-text">Ä°lk notunu ekleyerek baÅŸla!</div>
                </div>
            </div>

            <!-- Photos Tab -->
            <div class="profile-tab-panel" id="tab-photos">
                <div class="profile-loading" id="photos-loading">
                    <div class="profile-spinner"></div>
                </div>
                <div class="photos-grid" id="photos-grid"></div>
                <div class="empty-state" id="photos-empty" style="display: none;">
                    <i class="fas fa-camera empty-state-icon"></i>
                    <div class="empty-state-title">HenÃ¼z fotoÄŸraf yok</div>
                    <div class="empty-state-text">Ä°lk fotoÄŸrafÄ±nÄ± ekleyerek baÅŸla!</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Instagram-Style Notifications Page -->
    <div id="notifications-page" class="notifications-page">
        <div class="notifications-header">
            <div class="notifications-header-left">
                <button class="notifications-back" id="notifications-back"><i class="fas fa-arrow-left"></i></button>
                <h1 class="notifications-title">Bildirimler</h1>
            </div>
            <button class="notifications-filter-btn" id="notifications-filter">Filtrele</button>
        </div>
        
        <div class="notifications-content" id="notifications-content">
            <!-- Bildirimler dinamik olarak yÃ¼klenecek -->
        </div>
    </div>

</body>
</html>
